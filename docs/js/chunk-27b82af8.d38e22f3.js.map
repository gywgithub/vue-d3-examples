{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es6.function.name.js","webpack:///./src/components/TreeIV.vue?f100","webpack:///src/components/TreeIV.vue","webpack:///./src/components/TreeIV.vue?bfe7","webpack:///./src/components/TreeIV.vue"],"names":["dP","f","FProto","Function","prototype","nameRE","NAME","configurable","get","this","match","e","render","_vm","_h","$createElement","_c","_self","_m","ref","staticClass","staticStyle","attrs","viewbox","_l","v","k","key","x","y","d","_e","on","$event","textClick","_v","_s","name","staticRenderFns","data","treeData","svgWidth","svgHeight","rootX","rootY","nodes","computed","mounted","Math","floor","clientWidth","clientHeight","initTree","setTimeout","methods","root","value","pv","px","py","push","traverseNode","dx","self","num","obj","arr","i","len","parentNode","Number","dy","children","length","nodeNum","node","childrenArr","concat","nodeObj","console","log","component"],"mappings":"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","file":"js/chunk-27b82af8.d38e22f3.js","sourcesContent":["var dP = require('./_object-dp').f;\nvar FProto = Function.prototype;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// 19.2.4.2 name\nNAME in FProto || require('./_descriptors') && dP(FProto, NAME, {\n  configurable: true,\n  get: function () {\n    try {\n      return ('' + this).match(nameRE)[1];\n    } catch (e) {\n      return '';\n    }\n  }\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._m(0),_c('svg',{ref:\"svg\",staticClass:\"container-border\",staticStyle:{\"width\":\"80%\",\"height\":\"80vh\"},attrs:{\"viewBox\":_vm.viewbox,\"version\":\"1.1\",\"xmlns\":\"http://www.w3.org/2000/svg\"}},[_c('g',_vm._l((_vm.nodes),function(v,k){return _c('g',{key:k,attrs:{\"cx\":v.x,\"cy\":v.y,\"r\":\"5\"}},[(v.d)?_c('path',{attrs:{\"d\":v.d,\"fill\":\"transparent\",\"stroke\":\"#8e8e8e\"}}):_vm._e(),_c('circle',{attrs:{\"fill\":\"#9cc9b3\",\"fill-opacity\":\"1\",\"cx\":v.x,\"cy\":v.y,\"r\":\"12\",\"stroke\":\"#9cc9b3\",\"stroke-width\":\"2\"}}),_c('text',{staticStyle:{\"cursor\":\"pointer\"},attrs:{\"x\":v.x,\"y\":v.y,\"fill\":\"#656565\"},on:{\"click\":function($event){return _vm.textClick(v)}}},[_vm._v(\" \"+_vm._s(v.name)+\" \")])])}),0)])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('h2',[_vm._v(\"Sample Static Tree\")])])}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <div>\r\n      <h2>Sample Static Tree</h2>\r\n    </div>\r\n    <svg\r\n      ref=\"svg\"\r\n      :view-box.camel=\"viewbox\"\r\n      version=\"1.1\"\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      style=\"width: 80%; height: 80vh\"\r\n      class=\"container-border\"\r\n    >\r\n      <g>\r\n        <g v-for=\"(v, k) in nodes\" :key=\"k\" :cx=\"v.x\" :cy=\"v.y\" r=\"5\">\r\n          <path v-if=\"v.d\" :d=\"v.d\" fill=\"transparent\" stroke=\"#8e8e8e\" />\r\n          <circle\r\n            fill=\"#9cc9b3\"\r\n            fill-opacity=\"1\"\r\n            :cx=\"v.x\"\r\n            :cy=\"v.y\"\r\n            r=\"12\"\r\n            stroke=\"#9cc9b3\"\r\n            stroke-width=\"2\"\r\n          />\r\n          <text\r\n            :x=\"v.x\"\r\n            :y=\"v.y\"\r\n            style=\"cursor: pointer\"\r\n            fill=\"#656565\"\r\n            @click=\"textClick(v)\"\r\n          >\r\n            {{ v.name }}\r\n          </text>\r\n        </g>\r\n      </g>\r\n    </svg>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'node',\r\n  data () {\r\n    return {\r\n      treeData: null,\r\n      svgWidth: 0,\r\n      svgHeight: 0,\r\n      rootX: 0,\r\n      rootY: 0,\r\n      nodes: []\r\n    }\r\n  },\r\n  computed: {\r\n    viewbox () {\r\n      return '0 0 ' + this.svgWidth + ' ' + this.svgHeight\r\n    }\r\n  },\r\n  mounted () {\r\n    // 添加一个窗口监控方法, 修改 svg 宽高, https://blog.csdn.net/qq_25386583/article/details/77161478\r\n\r\n    let clientWidth = document.body.clientWidth\r\n    let clientHeight = document.body.clientHeight\r\n\r\n    this.svgWidth = Math.floor(clientWidth * 0.6)\r\n    this.svgHeight = clientHeight - 72\r\n    this.treeData = {\r\n      'name': 'Top Level',\r\n      'children': [\r\n        { 'name': 'Level 2: A' },\r\n        {\r\n          'name': 'Level 2: B',\r\n          'children': [\r\n            { 'name': 'Level 3: A' },\r\n            { 'name': 'Level 3: B' }\r\n            // ,\r\n            // { 'name': 'Level 3: C' }\r\n          ]\r\n        },\r\n        { 'name': 'Level 2: C' }\r\n      ]\r\n    }\r\n    this.initTree(this.treeData)\r\n\r\n    // 更新树效果\r\n    setTimeout(() => {\r\n      this.nodes = []\r\n      this.treeData = {\r\n        'name': 'Top Level',\r\n        'children': [\r\n          { 'name': 'Level 2: C' }\r\n        ]\r\n      }\r\n      this.initTree(this.treeData)\r\n    }, 5000)\r\n  },\r\n  methods: {\r\n    initTree (data) {\r\n      // 根节点坐标设置\r\n      this.rootX = Math.floor(this.svgWidth * 0.5)\r\n      this.rootY = Math.floor(this.svgHeight * 0.4)\r\n\r\n      let dx = 0 // node X distance\r\n      let dy = 150 // node Y distance\r\n      let by = 100 // Y axis of Bezier coordinate\r\n\r\n      // root node, 第一层\r\n      let root = {}\r\n      root.name = data.name\r\n      root.value = data.value\r\n      root.x = this.rootX\r\n      root.y = this.rootY\r\n      root.pv = 0 // parent node value\r\n      root.px = 0 // parent node X\r\n      root.py = 0 // parent node Y\r\n      root.d = null //  d=\"M500 200 C 500 500, 100 500, 100 900\"\r\n\r\n      this.nodes.push(root)\r\n\r\n      let self = this\r\n\r\n      if (data.children && data.children.length > 0) {\r\n        traverseNode(data.children, root, data.children.length)\r\n      }\r\n\r\n      function traverseNode (arr, parentNode, num) {\r\n        let len = arr.length\r\n\r\n        // distance 边距需要根据底层的节点个数去实时调整\r\n        dx = self.svgWidth / num\r\n        if (dx < 200) {\r\n          dx = 200\r\n        }\r\n        let childrenArr = []\r\n        let nodeNum = 0\r\n        for (let i = 0; i < len; i++) {\r\n          let obj = {}\r\n          obj.name = arr[i].name\r\n          obj.value = arr[i].value\r\n          if (len > 1) {\r\n            obj.x = i * dx + (dx * 0.5)\r\n          } else {\r\n            // 当前父节点下面只有一个节点, 子节点X坐标和父节点X坐标一致\r\n            obj.x = parentNode.x\r\n          }\r\n          obj.y = Number(parentNode.y + dy)\r\n          let d = 'M' + parentNode.x + ' ' + parentNode.y + ' C ' + parentNode.x + ' ' + Number(parentNode.y + by) + ', ' + obj.x + ' ' + Number(obj.y - by) + ', ' + obj.x + ' ' + obj.y\r\n          obj.d = d\r\n          self.nodes.push(obj)\r\n\r\n          // 深度优先 !!!\r\n          // if (arr[i].children && arr[i].children.length > 0) {\r\n          //   traverseNode(arr[i].children, obj)\r\n          // }\r\n\r\n          // 广度优先 第一步 !!!\r\n          if (arr[i].children && arr[i].children.length > 0) {\r\n            nodeNum = nodeNum + arr[i].children.length\r\n            let nodeObj = {\r\n              arr: arr[i].children,\r\n              node: obj\r\n            }\r\n            childrenArr = childrenArr.concat(nodeObj)\r\n          }\r\n        }\r\n        // 广度优先 第二步 !!!\r\n        for (let i = 0; i < childrenArr.length; i++) {\r\n          traverseNode(childrenArr[i].arr, childrenArr[i].node, nodeNum)\r\n        }\r\n      }\r\n    },\r\n    textClick (value) {\r\n      console.log(value) // eslint-disable-line\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TreeIV.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TreeIV.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TreeIV.vue?vue&type=template&id=ff98d618&scoped=true&\"\nimport script from \"./TreeIV.vue?vue&type=script&lang=js&\"\nexport * from \"./TreeIV.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ff98d618\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}