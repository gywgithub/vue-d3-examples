{"version":3,"sources":["webpack:///./src/components/ForceDirectedGraph.vue?7d02","webpack:///src/components/ForceDirectedGraph.vue","webpack:///./src/components/ForceDirectedGraph.vue?01ba","webpack:///./src/components/ForceDirectedGraph.vue","webpack:///./node_modules/core-js/modules/es6.function.name.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","_v","staticClass","attrs","staticRenderFns","data","mounted","forceSimulation","nodes","force","ticked","links","linksText","gs","started","d3","alphaTarget","restart","d","fx","x","fy","y","dragged","ended","append","component","dP","f","FProto","Function","prototype","nameRE","NAME","configurable","get","match","e"],"mappings":"yHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,KAAK,CAACJ,EAAIM,GAAG,wBAAwBF,EAAG,MAAM,CAACG,YAAY,mBAAmBC,MAAM,CAAC,MAAQ,MAAM,OAAS,YACrNC,EAAkB,G,wBCOtB,GACEC,KADF,WAEI,MAAO,IAETC,QAJF,WAKI,IAAJ,sCACA,gBACA,kBACA,mBACA,gBACA,oDAIA,GACA,CAAM,KAAN,QACA,CAAM,KAAN,QACA,CAAM,KAAN,QACA,CAAM,KAAN,QACA,CAAM,KAAN,KACA,CAAM,KAAN,KACA,CAAM,KAAN,KACA,CAAM,KAAN,MACA,CAAM,KAAN,OAGA,GACA,CAAM,OAAN,EAAM,OAAN,EAAM,SAAN,KAAM,MAAN,KACA,CAAM,OAAN,EAAM,OAAN,EAAM,SAAN,KAAM,MAAN,GACA,CAAM,OAAN,EAAM,OAAN,EAAM,SAAN,KAAM,MAAN,GACA,CAAM,OAAN,EAAM,OAAN,EAAM,SAAN,KAAM,MAAN,GACA,CAAM,OAAN,EAAM,OAAN,EAAM,SAAN,KAAM,MAAN,GACA,CAAM,OAAN,EAAM,OAAN,EAAM,SAAN,KAAM,MAAN,IACA,CAAM,OAAN,EAAM,OAAN,EAAM,SAAN,KAAM,MAAN,GACA,CAAM,OAAN,EAAM,OAAN,EAAM,SAAN,KAAM,MAAN,KACA,CAAM,OAAN,EAAM,OAAN,EAAM,SAAN,KAAM,MAAN,IACA,CAAM,OAAN,EAAM,OAAN,EAAM,SAAN,KAAM,MAAN,IAGA,WACA,yBACA,cAEA,WACA,uBACA,yBACA,yBAEIC,EAAgBC,MAAMA,GAC1B,aAEID,EAAgBE,MAAM,QAC1B,SACA,sBACM,OAAN,eAGIF,EAAgBE,MAAM,UAC1B,OACA,OAKI,IAAJ,gBACA,kBACA,QACA,QACA,eACA,6BACM,OAAN,QAEA,uBAEA,gBACA,kBACA,QACA,QACA,eACA,kBACM,OAAN,cAGA,6BACA,QACA,QACA,YACA,8BACM,IAAN,MACA,MACM,MAAN,4BAEA,cACA,cACA,aACA,aAiBI,SAASC,IACPC,EACN,uBAAQ,OAAR,cACA,uBAAQ,OAAR,cACA,uBAAQ,OAAR,cACA,uBAAQ,OAAR,cACMC,EACN,sBAAQ,OAAR,4BACA,sBAAQ,OAAR,4BACMC,EACN,8BAAQ,MAAR,gCAGI,SAASC,EAAb,GACWC,EAAX,aACQR,EAAgBS,YAAY,IAAKC,UAEnCC,EAAEC,GAAKD,EAAEE,EACTF,EAAEG,GAAKH,EAAEI,EAEX,SAASC,EAAb,GACML,EAAEC,GAAKJ,EAAb,OACMG,EAAEG,GAAKN,EAAb,OAEI,SAASS,EAAb,GACWT,EAAX,aACQR,EAAgBS,YAAY,GAE9BE,EAAEC,GAAK,KACPD,EAAEG,GAAK,KA3CTR,EAAGY,OAAO,UACd,aACA,2BACM,OAAN,QAGIZ,EAAGY,OAAO,QACd,cACA,cACA,cACA,kBACM,OAAN,YCrH4V,I,YCOxVC,EAAY,eACd,EACAhC,EACAU,GACA,EACA,KACA,WACA,MAIa,aAAAsB,E,gCClBf,IAAIC,EAAK,EAAQ,QAAgBC,EAC7BC,EAASC,SAASC,UAClBC,EAAS,wBACTC,EAAO,OAGXA,KAAQJ,GAAU,EAAQ,SAAqBF,EAAGE,EAAQI,EAAM,CAC9DC,cAAc,EACdC,IAAK,WACH,IACE,OAAQ,GAAKvC,MAAMwC,MAAMJ,GAAQ,GACjC,MAAOK,GACP,MAAO","file":"js/chunk-644b5f90.814e35df.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('h2',[_vm._v(\"Force-Direct Graph\")]),_c('svg',{staticClass:\"container-border\",attrs:{\"width\":\"960\",\"height\":\"600\"}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <h2>Force-Direct Graph</h2>\r\n    <svg width=\"960\" height=\"600\" class=\"container-border\"></svg>\r\n  </div>\r\n</template>\r\n<script>\r\nimport * as d3 from 'd3'\r\nexport default {\r\n  data () {\r\n    return {}\r\n  },\r\n  mounted () {\r\n    let marge = { top: 60, bottom: 60, left: 60, right: 60 }\r\n    let svg = d3.select('svg')\r\n    let width = svg.attr('width')\r\n    let height = svg.attr('height')\r\n    let g = svg.append('g')\r\n      .attr('transform', 'translate(' + marge.top + ',' + marge.left + ')')\r\n\r\n    // 准备数据\r\n    // 节点集\r\n    let nodes = [\r\n      { name: '湖南邵阳' },\r\n      { name: '山东泰安' },\r\n      { name: '广东阳江' },\r\n      { name: '山西太原' },\r\n      { name: '亮' },\r\n      { name: '丽' },\r\n      { name: '雪' },\r\n      { name: '小明' },\r\n      { name: '组长' }\r\n    ]\r\n    // 边集\r\n    let edges = [\r\n      { source: 0, target: 4, relation: '籍贯', value: 1.3 },\r\n      { source: 4, target: 5, relation: '舍友', value: 1 },\r\n      { source: 4, target: 6, relation: '舍友', value: 1 },\r\n      { source: 4, target: 7, relation: '舍友', value: 1 },\r\n      { source: 1, target: 6, relation: '籍贯', value: 2 },\r\n      { source: 2, target: 5, relation: '籍贯', value: 0.9 },\r\n      { source: 3, target: 7, relation: '籍贯', value: 1 },\r\n      { source: 5, target: 6, relation: '同学', value: 1.6 },\r\n      { source: 6, target: 7, relation: '朋友', value: 0.7 },\r\n      { source: 6, target: 8, relation: '职责', value: 2 }\r\n    ]\r\n    // 设置一个颜色比例尺\r\n    let colorScale = d3.scaleOrdinal()\r\n      .domain(d3.range(nodes.length))\r\n      .range(d3.schemeCategory10)\r\n    // 新建一个力导向图\r\n    let forceSimulation = d3.forceSimulation()\r\n      .force('link', d3.forceLink())\r\n      .force('charge', d3.forceManyBody())\r\n      .force('center', d3.forceCenter())\r\n    // 生成节点数据\r\n    forceSimulation.nodes(nodes)\r\n      .on('tick', ticked)\r\n    // 生成边数据\r\n    forceSimulation.force('link')\r\n      .links(edges)\r\n      .distance(function (d) { // 每一边的长度\r\n        return d.value * 100\r\n      })\r\n    // 设置图形中心位置\r\n    forceSimulation.force('center')\r\n      .x(width / 2)\r\n      .y(height / 2)\r\n    // // 顶点集，边集\r\n    // console.log(nodes)\r\n    // console.log(edges)\r\n    // 绘制边\r\n    let links = g.append('g')\r\n      .selectAll('line')\r\n      .data(edges)\r\n      .enter()\r\n      .append('line')\r\n      .attr('stroke', function (d, i) {\r\n        return colorScale(i)\r\n      })\r\n      .attr('stroke-width', 1)\r\n    // 边上的文字\r\n    let linksText = g.append('g')\r\n      .selectAll('text')\r\n      .data(edges)\r\n      .enter()\r\n      .append('text')\r\n      .text(function (d) {\r\n        return d.relation\r\n      })\r\n    // 创建分组\r\n    let gs = g.selectAll('.circleText')\r\n      .data(nodes)\r\n      .enter()\r\n      .append('g')\r\n      .attr('transform', function (d) {\r\n        let cirX = d.x\r\n        let cirY = d.y\r\n        return 'translate(' + cirX + ',' + cirY + ')'\r\n      })\r\n      .call(d3.drag()\r\n        .on('start', started)\r\n        .on('drag', dragged)\r\n        .on('end', ended)\r\n      )\r\n    // 绘制节点\r\n    gs.append('circle')\r\n      .attr('r', 10)\r\n      .attr('fill', function (d, i) {\r\n        return colorScale(i)\r\n      })\r\n    // 文字\r\n    gs.append('text')\r\n      .attr('x', -10)\r\n      .attr('y', -20)\r\n      .attr('dy', 10)\r\n      .text(function (d) {\r\n        return d.name\r\n      })\r\n    // ticked\r\n    function ticked () {\r\n      links\r\n        .attr('x1', function (d) { return d.source.x })\r\n        .attr('y1', function (d) { return d.source.y })\r\n        .attr('x2', function (d) { return d.target.x })\r\n        .attr('y2', function (d) { return d.target.y })\r\n      linksText\r\n        .attr('x', function (d) { return (d.source.x + d.target.x) / 2 })\r\n        .attr('y', function (d) { return (d.source.y + d.target.y) / 2 })\r\n      gs\r\n        .attr('transform', function (d) { return 'translate(' + d.x + ',' + d.y + ')' })\r\n    }\r\n    // drag\r\n    function started (d) {\r\n      if (!d3.event.active) {\r\n        forceSimulation.alphaTarget(0.8).restart() // 设置衰减系数，对节点位置移动过程的模拟，数值越高移动越快，数值范围[0, 1]\r\n      }\r\n      d.fx = d.x\r\n      d.fy = d.y\r\n    }\r\n    function dragged (d) {\r\n      d.fx = d3.event.x\r\n      d.fy = d3.event.y\r\n    }\r\n    function ended (d) {\r\n      if (!d3.event.active) {\r\n        forceSimulation.alphaTarget(0)\r\n      }\r\n      d.fx = null\r\n      d.fy = null\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style scoped>\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ForceDirectedGraph.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ForceDirectedGraph.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ForceDirectedGraph.vue?vue&type=template&id=43e06196&scoped=true&\"\nimport script from \"./ForceDirectedGraph.vue?vue&type=script&lang=js&\"\nexport * from \"./ForceDirectedGraph.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"43e06196\",\n  null\n  \n)\n\nexport default component.exports","var dP = require('./_object-dp').f;\nvar FProto = Function.prototype;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// 19.2.4.2 name\nNAME in FProto || require('./_descriptors') && dP(FProto, NAME, {\n  configurable: true,\n  get: function () {\n    try {\n      return ('' + this).match(nameRE)[1];\n    } catch (e) {\n      return '';\n    }\n  }\n});\n"],"sourceRoot":""}